<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学科教学智能平台：定制化学科教学知识库，开启专业化学习新体验</title>
    <link rel="stylesheet" href="learning-platform.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- 顶部导航栏 -->
    <header class="top-navbar">
        <div class="navbar-left">
            <div class="logo">
                <i class="fas fa-graduation-cap"></i>
                <div class="logo-text">
                    <div class="logo-title" id="platformTitle">学科教学智能平台</div>
                    <div class="logo-subtitle" id="platformSubtitle">为学生打造的专业化AI学习平台</div>
                </div>
            </div>
        </div>
        <div class="navbar-right">
            <div class="language-selector">
                <select id="languageSelect" onchange="changeLanguage(this.value)">
                    <option value="zh-CN">简体中文</option>
                    <option value="zh-TW">繁體中文</option>
                    <option value="en">English</option>
                </select>
            </div>
            <div class="user-info">
                <span class="welcome-text" data-key="welcome">欢迎，<span id="currentUser">学生</span></span>
                <div class="user-menu">
                    <button class="user-avatar" onclick="toggleUserMenu()">
                        <i class="fas fa-user"></i>
                    </button>
                    <div class="user-dropdown" id="userDropdown">
                        <a href="#" onclick="showSettings()">
                            <i class="fas fa-cog"></i> <span data-key="settings">设置</span>
                        </a>
                        <a href="#" onclick="showLearningHistory()">
                            <i class="fas fa-history"></i> <span data-key="learningHistory">学习记录</span>
                        </a>
                        <hr>
                        <a href="#" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i> <span data-key="logout">退出登录</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- 主内容区域 -->
    <main class="main-container">
        <!-- 侧边栏 -->
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <ul>
                    <li class="nav-item active" onclick="showSection('explore')">
                        <i class="fas fa-compass"></i>
                        <span data-key="explore">探索</span>
                    </li>
                    <li class="nav-item" onclick="showSection('myTutor')">
                        <i class="fas fa-user-graduate"></i>
                        <span data-key="myTutor">学科专业导师</span>
                    </li>
                    <li class="nav-item" onclick="showSection('professionalTutor')">
                        <i class="fas fa-chalkboard-teacher"></i>
                        <span data-key="professionalTutor">通用问答助手</span>
                    </li>
                    <li class="nav-item" onclick="showSection('personalProfile')">
                        <i class="fas fa-user-circle"></i>
                        <span data-key="personalProfile">Padlet-学生</span>
                    </li>
                    <li class="nav-item" onclick="showSection('studentManagement')">
                        <i class="fas fa-users"></i>
                        <span data-key="studentManagement">Dashboard-教师</span>
                    </li>
                    <li class="nav-item" onclick="showSection('textbooks')">
                        <i class="fas fa-book-open"></i>
                        <span data-key="textbooks">教材</span>
                    </li>
                    <li class="nav-item" onclick="showSection('lessonPlans')">
                        <i class="fas fa-clipboard-list"></i>
                        <span data-key="lessonPlans">教案</span>
                    </li>
                    <li class="nav-item" onclick="showSection('resources')">
                        <i class="fas fa-folder"></i>
                        <span data-key="resources">个人知识库</span>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- 内容区域 -->
        <div class="content-area">
            <!-- 探索页面 -->
            <section id="explore" class="content-section active">
                <div class="section-header">
                    <h2><i class="fas fa-compass"></i> 探索</h2>
                </div>
                
                <div class="explore-cards">
                    <div class="explore-card" onclick="openEssayCorrection()">
                        <div class="card-icon">
                            <i class="fas fa-edit"></i>
                        </div>
                        <div class="card-content">
                            <h3>作文批改</h3>
                            <p>AI智能作文批改，提供详细的修改建议和评分</p>
                        </div>
                        <div class="card-action">
                            <button class="btn btn-primary">开始批改</button>
                        </div>
                    </div>

                    <div class="explore-card" onclick="openFourSchoolExam()">
                        <div class="card-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="card-content">
                            <h3>四校联考</h3>
                            <p>真题演练、听读写集训、错题复盘与计时模拟</p>
                        </div>
                        <div class="card-action">
                            <button class="btn btn-primary">进入训练</button>
                        </div>
                    </div>

                    <div class="explore-card" onclick="openCreativeWriting()">
                        <div class="card-icon">
                            <i class="fas fa-lightbulb"></i>
                        </div>
                        <div class="card-content">
                            <h3>创意写作</h3>
                            <p>故事结构、人物塑造与语言表达系统训练</p>
                        </div>
                        <div class="card-action">
                            <button class="btn btn-primary">开始创作</button>
                        </div>
                    </div>

                    <div class="explore-card" onclick="openIELTSPrep()">
                        <div class="card-icon">
                            <i class="fas fa-globe"></i>
                        </div>
                        <div class="card-content">
                            <h3>雅思备考</h3>
                            <p>听说读写全科备考路径与范文精读</p>
                        </div>
                        <div class="card-action">
                            <button class="btn btn-primary">开始备考</button>
                        </div>
                    </div>

                    <div class="explore-card" onclick="openLessonPlanAssistant()">
                        <div class="card-icon">
                            <i class="fas fa-clipboard"></i>
                        </div>
                        <div class="card-content">
                            <h3>备课助手</h3>
                            <p>AI智能备课助手，快速生成高质量教案</p>
                        </div>
                        <div class="card-action">
                            <button class="btn btn-primary">开始备课</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 我的导师页面 -->
            <section id="myTutor" class="content-section">
                <div class="chat-container">
                    <div class="chat-header tutor-header">
                        <h2><i class="fas fa-user-graduate"></i> 学科专业导师</h2>
                        <div class="chat-actions">
                            <button class="btn btn-secondary" onclick="showChatHistory('myTutor')">
                                <i class="fas fa-history"></i> 历史对话
                            </button>
                        </div>
                    </div>
                    
                    <div class="chat-messages" id="myTutorMessages">
                        <div class="tutor-hero">
                            <div class="tutor-hero-icon"><i class="fas fa-user-graduate"></i></div>
                            <div class="tutor-hero-text">
                                <h3 class="tutor-title">欢迎使用学科专业导师</h3>
                                <p class="tutor-subtitle">基于你的目标与资料，生成个性化的学习规划、方法与行动清单。</p>
                                <div class="tutor-actions">
                                    <button class="btn btn-primary btn-lg" onclick="openCreateTutorModal()">
                                        <i class="fas fa-user-plus"></i> 新建我的专业导师
                                    </button>
                                    <button class="btn btn-secondary btn-lg" onclick="openExistingTutorModal()">
                                        <i class="fas fa-users"></i> 选择已有专业导师
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    
                </div>
            </section>

    <!-- 新建我的专业导师弹窗 -->
    <div class="modal-overlay" id="createTutorModal" style="display: none;" onclick="if(event.target === this) closeCreateTutorModal()">
        <div class="modal-content" style="max-width: 720px;">
            <div class="modal-header">
                <h3><i class="fas fa-user-plus"></i> 新建我的专业导师</h3>
                <button class="close-btn" onclick="closeCreateTutorModal()"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="form-grid">
                    <div class="form-row">
                        <label>导师名称</label>
                        <input type="text" id="tutorName" placeholder="如：英语学科导师">
                    </div>
                    <div class="form-row">
                        <label>学科/领域</label>
                        <input type="text" id="tutorSubject" placeholder="如：英语/物理/历史">
                    </div>
                    <div class="form-row">
                        <label>指导目标</label>
                        <input type="text" id="tutorGoal" placeholder="如：备战期中考试、提升阅读理解">
                    </div>
                    <div class="form-row">
                        <label>个人化说明（可选）</label>
                        <textarea id="tutorNote" rows="3" placeholder="你的背景、当前薄弱点、希望的指导风格等"></textarea>
                    </div>
                </div>

                <div class="divider" style="margin: 16px 0;"></div>
                <h4 style="margin: 0 0 8px 0;">问题资料</h4>
                <p style="color:#6b7280; margin-top:0;">可直接粘贴文本，或通过文件提取内容后导入。</p>
                <div style="display:flex; gap:8px; margin-bottom:8px;">
                    <button class="btn btn-secondary" onclick="uploadFile('resource')"><i class="fas fa-upload"></i> 上传并提取</button>
                    <button class="btn" onclick="importLatestUploadedText()"><i class="fas fa-file-import"></i> 导入最近上传文本</button>
                </div>
                <textarea id="tutorFileContext" rows="6" placeholder="在此粘贴或导入资料文本……" style="width:100%;"></textarea>

                <div class="form-actions" style="margin-top:16px; display:flex; justify-content:flex-end; gap:8px;">
                    <button class="btn btn-secondary" onclick="closeCreateTutorModal()">取消</button>
                    <button class="btn btn-primary" onclick="submitCreateTutor()"><i class="fas fa-play"></i> 创建并向导师提问</button>
                </div>
                <div id="createTutorResult" class="file-list" style="margin-top:16px; display:none; padding:16px;">
                    <pre id="createTutorAnswer" style="white-space:pre-wrap; margin:0;"></pre>
                </div>
            </div>
        </div>
    </div>

            
            <!-- 选择已有专业导师弹窗 -->
            <div class="modal-overlay" id="existingTutorModal" style="display: none;" onclick="if(event.target === this) closeExistingTutorModal()">
                <div class="modal-content" style="max-width: 720px;">
                    <div class="modal-header">
                        <h3><i class="fas fa-users"></i> 选择已有专业导师</h3>
                        <button class="close-btn" onclick="closeExistingTutorModal()"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="modal-body">
                        <div id="tutorList" class="file-list" style="max-height:300px; overflow:auto;"></div>
                        <div class="divider" style="margin: 12px 0;"></div>
                        <textarea id="existingTutorQuestion" rows="4" placeholder="在此输入要向该导师提问的内容……" style="width:100%;"></textarea>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closeExistingTutorModal()">取消</button>
                        <button class="btn btn-primary" onclick="startQnAWithSelectedTutor()"><i class="fas fa-play"></i> 开始问答</button>
                    </div>
                </div>
            </div>

            <!-- 通用问答助手页面 -->
            <section id="professionalTutor" class="content-section">
                <div class="chat-container">
                    <!-- 顶部工具栏 -->
                    <div class="chat-header">
                        <h2><i class="fas fa-chalkboard-teacher"></i> 通用问答助手</h2>
                        <div class="chat-actions">
                            <button class="btn btn-secondary" onclick="showChatHistory('professionalTutor')">
                                <i class="fas fa-history"></i> 历史对话
                            </button>
                            <button class="btn btn-secondary" onclick="clearProfessionalTutorChat()">
                                <i class="fas fa-trash"></i> 清空对话
                            </button>
                            <button class="btn btn-primary" onclick="newProfessionalChat()">
                                <i class="fas fa-plus"></i> 新建对话
                            </button>
                        </div>
                    </div>
                    
                    <!-- 对话区域 -->
                    <div class="chat-messages" id="professionalTutorMessages">
                        <div class="welcome-message">
                            <div class="welcome-content">
                                <i class="fas fa-chalkboard-teacher"></i>
                                <h3>欢迎使用通用问答助手！</h3>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 输入区域 -->
                    <div class="chat-input-container">
                        <div class="input-wrapper">
                            <textarea id="professionalTutorInput" placeholder="向通用问答助手提问..." rows="1"></textarea>
                            <button class="send-btn" onclick="sendProfessionalTutorMessage()" id="professionalTutorSendBtn">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 历史对话模态框 -->
            <div id="chatHistoryModal" class="modal" style="display: none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3><i class="fas fa-history"></i> 历史对话</h3>
                        <button class="close-btn" onclick="hideChatHistory()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div id="historyContent">
                            <!-- 历史对话内容将在这里显示 -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="hideChatHistory()">关闭</button>
                        <button class="btn btn-danger" onclick="clearAllHistory()">清空所有历史</button>
                    </div>
                </div>
            </div>

            <!-- 上传资源模态框 -->
            <div id="uploadModal" class="modal" style="display: none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3><i class="fas fa-upload"></i> 上传资源</h3>
                        <button class="close-btn" onclick="hideUploadModal()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>选择类别</label>
                            <select id="uploadCategory" class="select" onchange="toggleLessonPlanSubtype()">
                                <option value="materials">教材 (materials)</option>
                                <option value="lesson_plans">教案 (lesson_plans)</option>
                                <option value="resources">资源 (resources)</option>
                            </select>
                        </div>
                        <div class="form-group" id="lessonPlanSubtypeGroup" style="display: none;">
                            <label>教案类型</label>
                            <select id="lessonPlanSubtype" class="select">
                                <option value="teaching_content">教学内容设计</option>
                                <option value="student_analysis">学情（教学目标等）</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>选择文件</label>
                            <input id="uploadFiles" type="file" multiple />
                        </div>
                        <div id="uploadResult" style="font-size: 12px; color: #666;"></div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="hideUploadModal()">取消</button>
                        <button class="btn btn-primary" onclick="uploadFiles()">开始上传</button>
                    </div>
                </div>
            </div>

            

            <!-- 课程页面 -->
            <section id="courses" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-book"></i> 课程</h2>
                    <div class="section-actions">
                        <button class="btn btn-primary" onclick="uploadFile('course')">
                            <i class="fas fa-upload"></i> 上传课程材料
                        </button>
                    </div>
                </div>
                
                <div class="file-management">
                    <!-- 显示方式切换 -->
                    <div class="view-toggle" style="display: flex; gap: 12px; padding: 20px; background: white; border-bottom: 1px solid #e5e7eb; align-items: center;">
                        <span style="font-weight: 500; color: #374151; margin-right: 8px;">显示方式：</span>
                        <button class="btn btn-secondary active" id="toggle-course-weekly" onclick="switchCourseView('weekly')">
                            <i class="fas fa-calendar-week"></i> 按教学周
                        </button>
                        <button class="btn btn-secondary" id="toggle-course-category" onclick="switchCourseView('category')">
                            <i class="fas fa-folder"></i> 按类型
                        </button>
                    </div>
                    
                    <!-- 按教学周视图 -->
                    <div id="course-weekly-view" class="textbook-view active">
                        <div class="week-navigation" style="padding: 20px; background: white; border-bottom: 1px solid #e5e7eb;">
                            <button class="btn btn-secondary btn-sm" onclick="previousCourseWeek()">
                                <i class="fas fa-chevron-left"></i> 上一周
                            </button>
                            <h3 id="current-course-week-display" style="display: inline-block; margin: 0 20px; font-size: 18px; color: #1f2937;">第1周</h3>
                            <button class="btn btn-secondary btn-sm" onclick="nextCourseWeek()">
                                下一周 <i class="fas fa-chevron-right"></i>
                            </button>
                            <div class="week-jump" style="margin-left: 20px; display: inline-flex; align-items: center; gap: 8px;">
                                <input type="number" id="course-week-jump-input" min="1" max="16" placeholder="周数" onkeypress="handleCourseWeekJumpKeyPress(event)" style="width: 60px; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px;">
                                <button class="btn btn-primary btn-sm" onclick="jumpToCourseWeek()" style="padding: 8px 16px;">
                                    <i class="fas fa-arrow-right"></i> 跳转
                                </button>
                            </div>
                        </div>
                        <div id="course-weekly-content" class="file-list-content">
                            <div class="file-list">
                                <div class="file-list-header">
                                    <div class="file-name">文件名</div>
                                    <div class="file-type">类型</div>
                                    <div class="file-size">大小</div>
                                    <div class="file-date">上传时间</div>
                                    <div class="file-actions-header">操作</div>
                                </div>
                                
                                <!-- 文件列表将通过JavaScript从API动态加载 -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- 按类型视图 -->
                    <div id="course-category-view" class="textbook-view" style="display: none;">
                        <div class="file-filters" style="padding: 20px; background: white; border-bottom: 1px solid #e5e7eb;">
                            <button class="btn btn-secondary active" onclick="filterCourseFiles('all')">全部</button>
                            <button class="btn btn-secondary" onclick="filterCourseFiles('textbook')">教材</button>
                            <button class="btn btn-secondary" onclick="filterCourseFiles('lessonPlan')">教案</button>
                            <button class="btn btn-secondary" onclick="filterCourseFiles('resource')">资源</button>
                        </div>
                        <div id="course-category-content" class="file-list-content">
                            <div class="file-list">
                                <div class="file-list-header">
                                    <div class="file-name">文件名</div>
                                    <div class="file-type">类型</div>
                                    <div class="file-size">大小</div>
                                    <div class="file-date">上传时间</div>
                                    <div class="file-actions-header">操作</div>
                                </div>
                                
                                <!-- 文件列表将通过JavaScript从API动态加载 -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 个人档案页面 -->
            <section id="personalProfile" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-user-circle"></i> Padlet-学生</h2>
                </div>
                
                <!-- 模块化卡片布局 -->
                <div class="explore-cards">
                    <!-- 学习打卡日历卡片 -->
                    <div class="explore-card" onclick="openStudyCalendar()">
                        <div class="card-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="card-content">
                            <h3>学习打卡日历</h3>
                            <p>记录每日学习，追踪学习进度和打卡率</p>
                            <div class="card-stats">
                                <span>
                                    <i class="fas fa-check"></i>
                                    本月打卡 <span id="calendarCardDays">0</span> 天
                                </span>
                                <span>
                                    <i class="fas fa-percentage"></i>
                                    打卡率 <span id="calendarCardRate">0%</span>
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 学习日志总结卡片 -->
                    <div class="explore-card" onclick="openLearningLog()">
                        <div class="card-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <i class="fas fa-book-open"></i>
                        </div>
                        <div class="card-content">
                            <h3>学习日志总结</h3>
                            <p>查看学习时长、完成课程和获得成就</p>
                            <div class="card-stats">
                                <span><i class="fas fa-clock"></i> 本月 24小时</span>
                                <span><i class="fas fa-book"></i> 完成 3门课程</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 课表卡片 -->
                    <div class="explore-card" onclick="openSchedule()">
                        <div class="card-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="card-content">
                            <h3>课表管理</h3>
                            <p>上传和管理课程表，规划学习时间</p>
                            <div class="card-stats">
                                <span><i class="fas fa-file"></i> 已上传课表</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 课程内容卡片 -->
                    <div class="explore-card" onclick="openCourses()">
                        <div class="card-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                            <i class="fas fa-book"></i>
                        </div>
                        <div class="card-content">
                            <h3>课程学习</h3>
                            <p>按学科分类查看教材和教案，支持多学科浏览</p>
                            <div class="card-stats">
                                <span><i class="fas fa-graduation-cap"></i> 9门学科</span>
                                <span><i class="fas fa-calendar-week"></i> 13个教学周</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 日历详细内容（隐藏，点击后显示） -->
                <div id="study-calendar-content" style="display: none;">
                    <button class="btn btn-secondary" onclick="goBackToPadletModules()" style="margin-bottom: 20px;">
                        <i class="fas fa-arrow-left"></i> 返回
                    </button>
                    <div class="profile-layout">
                        <div class="profile-left">
                            <div class="calendar-container">
                                <h3><i class="fas fa-calendar-check"></i> 学习打卡日历</h3>
                                <div class="calendar-split">
                                    <div class="calendar-main">
                                        <div class="calendar">
                                            <div class="calendar-header">
                                                <button class="btn btn-secondary btn-sm" onclick="previousMonth()">
                                                    <i class="fas fa-chevron-left"></i>
                                                </button>
                                                <h4 id="currentMonth">2024年1月</h4>
                                                <button class="btn btn-secondary btn-sm" onclick="nextMonth()">
                                                    <i class="fas fa-chevron-right"></i>
                                                </button>
                                            </div>
                                            <div class="calendar-legend">
                                                <span><span class="legend-dot legend-checked"></span>已打卡</span>
                                                <span><span class="legend-dot legend-today"></span>今天</span>
                                                <span><span class="legend-dot legend-empty"></span>未打卡</span>
                                            </div>
                                            <div class="calendar-grid" id="calendarGrid"></div>
                                        </div>
                                    </div>
                                    <aside class="calendar-side">
                                        <div class="calendar-stats">
                                            <div class="stat-item">
                                                <span class="stat-number">15</span>
                                                <span class="stat-label">本月打卡天数</span>
                                            </div>
                                            <div class="stat-item">
                                                <span class="stat-number">85%</span>
                                                <span class="stat-label">打卡率</span>
                                                <div class="stat-progress">
                                                    <div class="stat-progress-bar" id="checkRateBar" style="width: 85%"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </aside>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 学习日志详细内容（隐藏，点击后显示） -->
                <div id="learning-log-content" style="display: none;">
                    <button class="btn btn-secondary" onclick="goBackToPadletModules()" style="margin-bottom: 20px;">
                        <i class="fas fa-arrow-left"></i> 返回
                    </button>
                    <div class="profile-right">
                        <div class="learning-log">
                            <h3><i class="fas fa-book-open"></i> 学习日志总结</h3>
                            <div class="log-summary">
                                <div class="summary-card">
                                    <div class="summary-icon">
                                        <i class="fas fa-clock"></i>
                                    </div>
                                    <div class="summary-content">
                                        <h4>学习时长</h4>
                                        <p class="summary-number">24小时</p>
                                        <p class="summary-period">本月</p>
                                    </div>
                                </div>
                                
                                <div class="summary-card">
                                    <div class="summary-icon">
                                        <i class="fas fa-book"></i>
                                    </div>
                                    <div class="summary-content">
                                        <h4>完成课程</h4>
                                        <p class="summary-number">3门</p>
                                        <p class="summary-period">本学期</p>
                                    </div>
                                </div>
                                
                                <div class="summary-card">
                                    <div class="summary-icon">
                                        <i class="fas fa-trophy"></i>
                                    </div>
                                    <div class="summary-content">
                                        <h4>获得成就</h4>
                                        <p class="summary-number">8个</p>
                                        <p class="summary-period">累计</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="recent-logs">
                                <h4>最近学习记录</h4>
                                <div class="log-list">
                                    <div class="log-item">
                                        <div class="log-date">今天</div>
                                        <div class="log-content">
                                            <h5>完成 Unit 3 阅读理解训练</h5>
                                            <p>学习时长：2小时30分钟</p>
                                        </div>
                                        <div class="log-status completed">
                                            <i class="fas fa-check-circle"></i>
                                        </div>
                                    </div>
                                    
                                    <div class="log-item">
                                        <div class="log-date">昨天</div>
                                        <div class="log-content">
                                            <h5>完成语法练习题</h5>
                                            <p>得分：7.0，反馈：语法掌握良好</p>
                                        </div>
                                        <div class="log-status completed">
                                            <i class="fas fa-check-circle"></i>
                                        </div>
                                    </div>
                                    
                                    <div class="log-item">
                                        <div class="log-date">1月20日</div>
                                        <div class="log-content">
                                            <h5>背诵高频动词短语</h5>
                                            <p>数量：30 个，复现率：80%</p>
                                        </div>
                                        <div class="log-status completed">
                                            <i class="fas fa-check-circle"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 课表详细内容（隐藏，点击后显示） -->
                <div id="schedule-content" style="display: none;">
                    <button class="btn btn-secondary" onclick="goBackToPadletModules()" style="margin-bottom: 20px;">
                        <i class="fas fa-arrow-left"></i> 返回
                    </button>
                    <div class="profile-right">
                        <div class="learning-log">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <h3 style="margin: 0;"><i class="fas fa-calendar"></i> 课表</h3>
                                <div style="display: flex; justify-content: flex-end;">
                                    <button class="btn btn-primary" onclick="uploadSchedule()">
                                        <i class="fas fa-upload"></i> 上传课表
                                    </button>
                                </div>
                            </div>
                            <div class="file-list-content" id="schedule-file-list">
                                <div class="file-list">
                                    <div class="file-list-header">
                                        <div class="file-name">文件名</div>
                                        <div class="file-type">类型</div>
                                        <div class="file-size">大小</div>
                                        <div class="file-date">上传时间</div>
                                        <div class="file-actions-header">操作</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 课程详细内容（隐藏，点击后显示） -->
                <div id="courses-content" style="display: none;">
                    <button class="btn btn-secondary" onclick="goBackToPadletModules()" style="margin-bottom: 20px;">
                        <i class="fas fa-arrow-left"></i> 返回
                    </button>
                    <div class="profile-full-width">
                        <div class="learning-log">
                            <div class="section-header-small">
                                <h3><i class="fas fa-book"></i> 课程</h3>
                            </div>
                            
                            <div class="file-management">
                                <!-- 学科分类导航 -->
                                <div class="subject-tabs" id="subject-tabs" style="display: flex; gap: 8px; padding: 20px; background: white; border-bottom: 1px solid #e5e7eb; flex-wrap: wrap;"></div>
                                
                                <!-- 当前学科的教学周导航 -->
                                <div id="week-tabs" style="display: flex; gap: 8px; padding: 20px; background: white; border-bottom: 1px solid #e5e7eb; flex-wrap: wrap;"></div>
                                
                                <!-- 课程文件列表 -->
                                <div id="padlet-course-content" class="file-list-content">
                                    <div class="file-list">
                                        <div class="file-list-header">
                                            <div class="file-name">文件名</div>
                                            <div class="file-type">类型</div>
                                            <div class="file-size">大小</div>
                                            <div class="file-date">上传时间</div>
                                            <div class="file-actions-header">操作</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 练习题库 -->
            <section id="practice" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-dumbbell"></i> 练习题库</h2>
                    <div class="section-actions">
                        <button class="btn btn-primary" onclick="startPractice()">
                            <i class="fas fa-play"></i> 开始练习
                        </button>
                    </div>
                </div>
                
                <div class="practice-categories">
                        <div class="category-card">
                        <div class="category-icon">
                            <i class="fas fa-headphones"></i>
                        </div>
                        <h3>听力题</h3>
                        <p>校园、旅行等场景听力理解</p>
                        <div class="question-count">120题</div>
                    </div>
                    
                        <div class="category-card">
                        <div class="category-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <h3>口语题</h3>
                        <p>日常交流与考试口语</p>
                        <div class="question-count">80题</div>
                    </div>
                    
                        <div class="category-card">
                        <div class="category-icon">
                            <i class="fas fa-pen-nib"></i>
                        </div>
                        <h3>写作题</h3>
                        <p>议论文、说明文与书信写作</p>
                        <div class="question-count">150题</div>
                    </div>
                </div>
            </section>

            <!-- 教材页面 -->
            <section id="textbooks" class="content-section">
                <div class="section-header">
                    <div>
                        <h2><i class="fas fa-book-open"></i> 教材</h2>
                        <p class="section-subtitle">管理您的教学教材和参考资料</p>
                    </div>
                </div>
                
                <!-- 上传区域（缩小版） -->
                <div class="resources-upload-area compact" onclick="triggerTextbookUpload()" ondrop="handleTextbookDrop(event)" ondragover="handleTextbookDragOver(event)" ondragleave="handleTextbookDragLeave(event)">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <h3>上传教材文件</h3>
                    <p>点击上传或拖拽文件到这里</p>
                    <p class="upload-hint">支持 PDF、Word、图片等格式</p>
                    <button class="btn btn-primary" onclick="event.stopPropagation(); uploadFile('textbook');">
                        <i class="fas fa-plus"></i> 选择文件上传
                    </button>
                </div>
                
                <!-- 搜索和筛选工具栏 -->
                <div class="resources-toolbar">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="textbookSearch" placeholder="搜索教材..." oninput="filterTextbooks()">
                        <button class="clear-search" id="clearTextbookSearchBtn" onclick="clearTextbookSearch()" style="display: none;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="file-filters">
                        <button class="filter-btn active" data-filter="all" onclick="filterTextbooksByType('all')">
                            <i class="fas fa-th"></i> 全部
                        </button>
                        <button class="filter-btn" data-filter="pdf" onclick="filterTextbooksByType('pdf')">
                            <i class="fas fa-file-pdf"></i> PDF
                        </button>
                        <button class="filter-btn" data-filter="document" onclick="filterTextbooksByType('document')">
                            <i class="fas fa-file-word"></i> 文档
                        </button>
                        <button class="filter-btn" data-filter="image" onclick="filterTextbooksByType('image')">
                            <i class="fas fa-image"></i> 图片
                        </button>
                    </div>
                </div>
                
                <!-- 文件列表区域 -->
                <div class="resources-content">
                    <div class="file-list" id="textbookFileList">
                        <!-- 文件列表将通过JavaScript从API动态加载 -->
                    </div>
                </div>
            </section>

            <!-- 教案页面 -->
            <section id="lessonPlans" class="content-section">
                <div class="section-header">
                    <div>
                        <h2><i class="fas fa-clipboard-list"></i> 教案</h2>
                        <p class="section-subtitle">管理您的教学计划和教案资料</p>
                    </div>
                </div>
                
                <!-- 上传区域（缩小版） -->
                <div class="resources-upload-area compact" onclick="triggerLessonPlanUpload()" ondrop="handleLessonPlanDrop(event)" ondragover="handleLessonPlanDragOver(event)" ondragleave="handleLessonPlanDragLeave(event)">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <h3>上传教案文件</h3>
                    <p>点击上传或拖拽文件到这里</p>
                    <p class="upload-hint">支持 PDF、Word、PPT 等格式</p>
                    <button class="btn btn-primary" onclick="event.stopPropagation(); uploadFile('lessonPlan');">
                        <i class="fas fa-plus"></i> 选择文件上传
                    </button>
                </div>
                
                <!-- 搜索和筛选工具栏 -->
                <div class="resources-toolbar">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="lessonPlanSearch" placeholder="搜索教案..." oninput="filterLessonPlans()">
                        <button class="clear-search" id="clearLessonPlanSearchBtn" onclick="clearLessonPlanSearch()" style="display: none;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="file-filters">
                        <button class="filter-btn active" data-filter="all" onclick="filterLessonPlansByType('all')">
                            <i class="fas fa-th"></i> 全部
                        </button>
                        <button class="filter-btn" data-filter="pdf" onclick="filterLessonPlansByType('pdf')">
                            <i class="fas fa-file-pdf"></i> PDF
                        </button>
                        <button class="filter-btn" data-filter="document" onclick="filterLessonPlansByType('document')">
                            <i class="fas fa-file-word"></i> Word
                        </button>
                        <button class="filter-btn" data-filter="ppt" onclick="filterLessonPlansByType('ppt')">
                            <i class="fas fa-file-powerpoint"></i> PPT
                        </button>
                    </div>
                </div>
                
                <!-- 文件列表区域 -->
                <div class="resources-content">
                    <div class="file-list" id="lessonPlanFileList">
                        <!-- 文件列表将通过JavaScript从API动态加载 -->
                    </div>
                </div>
            </section>

            <!-- 学生管理页面 -->
            <section id="studentManagement" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-users"></i> Dashboard-教师</h2>
                    <div class="section-actions">
                        <button class="btn btn-primary" onclick="addStudent()">
                            <i class="fas fa-user-plus"></i> 添加学生
                        </button>
                        <button class="btn btn-secondary" onclick="exportStudentData()">
                            <i class="fas fa-download"></i> 导出数据
                        </button>
                    </div>
                </div>
                
                <div class="student-management">
                    <div class="student-filters">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="搜索学生姓名或学号..." onkeyup="searchStudents(this.value)">
                        </div>
                        <select onchange="filterStudentsByGrade(this.value)" style="padding: 10px 40px 10px 16px;">
                            <option value="">全部年级</option>
                            <option value="2021">2021级</option>
                            <option value="2022">2022级</option>
                            <option value="2023">2023级</option>
                            <option value="2024">2024级</option>
                        </select>
                    </div>
                    
                    <div class="student-table-container">
                        <table class="student-table">
                            <thead>
                                <tr>
                                    <th>学号</th>
                                    <th>姓名</th>
                                    <th>年级</th>
                                    <th>英语水平</th>
                                    <th>学习进度</th>
                                    <th>打卡天数</th>
                                    <th>最后登录</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="studentTableBody">
                                <tr>
                                    <td>12345678</td>
                                    <td><strong>张三</strong></td>
                                    <td><span style="background: #e0f2fe; color: #0369a1; padding: 4px 10px; border-radius: 6px; font-size: 12px;">2024级</span></td>
                                    <td><span style="background: #f0f9ff; color: #0284c7; padding: 4px 10px; border-radius: 6px; font-size: 12px; font-weight: 600;">B1</span></td>
                                    <td>
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: 75%"></div>
                                        </div>
                                        <span>75%</span>
                                    </td>
                                    <td><strong style="color: #059669;">15天</strong></td>
                                    <td><span style="color: #6b7280; font-size: 13px;">今天 14:30</span></td>
                                    <td>
                                        <div class="btn-group">
                                            <button class="btn btn-primary btn-sm"><i class="fas fa-eye"></i> 查看</button>
                                            <button class="btn btn-secondary btn-sm"><i class="fas fa-edit"></i> 编辑</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>87654321</td>
                                    <td><strong>李四</strong></td>
                                    <td><span style="background: #e0f2fe; color: #0369a1; padding: 4px 10px; border-radius: 6px; font-size: 12px;">2023级</span></td>
                                    <td><span style="background: #dbeafe; color: #1e40af; padding: 4px 10px; border-radius: 6px; font-size: 12px; font-weight: 600;">B2</span></td>
                                    <td>
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: 60%"></div>
                                        </div>
                                        <span>60%</span>
                                    </td>
                                    <td><strong style="color: #059669;">12天</strong></td>
                                    <td><span style="color: #6b7280; font-size: 13px;">昨天 16:45</span></td>
                                    <td>
                                        <div class="btn-group">
                                            <button class="btn btn-primary btn-sm"><i class="fas fa-eye"></i> 查看</button>
                                            <button class="btn btn-secondary btn-sm"><i class="fas fa-edit"></i> 编辑</button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>11111111</td>
                                    <td><strong>王五</strong></td>
                                    <td><span style="background: #e0f2fe; color: #0369a1; padding: 4px 10px; border-radius: 6px; font-size: 12px;">2024级</span></td>
                                    <td><span style="background: #fef3c7; color: #d97706; padding: 4px 10px; border-radius: 6px; font-size: 12px; font-weight: 600;">A2</span></td>
                                    <td>
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: 45%"></div>
                                        </div>
                                        <span>45%</span>
                                    </td>
                                    <td><strong style="color: #f59e0b;">8天</strong></td>
                                    <td><span style="color: #6b7280; font-size: 13px;">2天前 09:20</span></td>
                                    <td>
                                        <div class="btn-group">
                                            <button class="btn btn-primary btn-sm"><i class="fas fa-eye"></i> 查看</button>
                                            <button class="btn btn-secondary btn-sm"><i class="fas fa-edit"></i> 编辑</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="student-stats">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-content">
                                <h3>总学生数</h3>
                                <div class="stat-number">156</div>
                                <p style="color: #6b7280; font-size: 13px; margin-top: 4px;">本学期注册</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-user-check"></i>
                            </div>
                            <div class="stat-content">
                                <h3>活跃学生</h3>
                                <div class="stat-number">128</div>
                                <p style="color: #6b7280; font-size: 13px; margin-top: 4px;">本月登录过</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-content">
                                <h3>平均进度</h3>
                                <div class="stat-number">68%</div>
                                <p style="color: #6b7280; font-size: 13px; margin-top: 4px;">学习完成度</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #ec4899 0%, #be185d 100%);">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="stat-content">
                                <h3>平均打卡</h3>
                                <div class="stat-number">12天</div>
                                <p style="color: #6b7280; font-size: 13px; margin-top: 4px;">本月打卡天数</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 资源页面 -->
            <section id="resources" class="content-section">
                <div class="section-header">
                    <div>
                        <h2><i class="fas fa-folder-open"></i> 个人知识库</h2>
                        <p class="section-subtitle">管理您的学习资源，建立个人知识库</p>
                    </div>
                    <div class="section-header-search">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="resourceSearch" placeholder="搜索文件..." oninput="filterResources()">
                            <button class="clear-search" id="clearSearchBtn" onclick="clearResourceSearch()" style="display: none;">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 统计信息卡片 -->
                <div class="resources-stats" id="resourcesStats">
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-file">
                            <i class="fas fa-file"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="totalFilesCount">0</div>
                            <div class="stat-label">总文件数</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-storage">
                            <i class="fas fa-hdd"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="totalSize">0</div>
                            <div class="stat-label">总存储量</div>
                        </div>
                    </div>
                </div>
                
                <!-- 上传区域（缩小版） -->
                <div class="resources-upload-area compact" onclick="triggerResourceUpload()" ondrop="handleResourceDrop(event)" ondragover="handleResourceDragOver(event)" ondragleave="handleResourceDragLeave(event)">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <h3>上传文件到知识库</h3>
                    <p>点击上传或拖拽文件到这里</p>
                    <p class="upload-hint">支持 PDF、Word、图片、视频、音频等格式</p>
                    <button class="btn btn-primary" onclick="event.stopPropagation(); uploadFile('resource');">
                        <i class="fas fa-plus"></i> 选择文件上传
                    </button>
                </div>
                
                <!-- 筛选工具栏 -->
                <div class="resources-toolbar">
                    <div class="file-filters">
                        <button class="filter-btn active" data-filter="all" onclick="filterResourcesByType('all')">
                            <i class="fas fa-th"></i> 全部
                        </button>
                        <button class="filter-btn" data-filter="pdf" onclick="filterResourcesByType('pdf')">
                            <i class="fas fa-file-pdf"></i> PDF
                        </button>
                        <button class="filter-btn" data-filter="image" onclick="filterResourcesByType('image')">
                            <i class="fas fa-image"></i> 图片
                        </button>
                        <button class="filter-btn" data-filter="video" onclick="filterResourcesByType('video')">
                            <i class="fas fa-video"></i> 视频
                        </button>
                        <button class="filter-btn" data-filter="audio" onclick="filterResourcesByType('audio')">
                            <i class="fas fa-music"></i> 音频
                        </button>
                        <button class="filter-btn" data-filter="document" onclick="filterResourcesByType('document')">
                            <i class="fas fa-file-word"></i> 文档
                        </button>
                    </div>
                </div>
                
                <!-- 文件列表区域 -->
                <div class="resources-content">
                    <div class="file-list" id="resourceFileList">
                        <!-- 文件列表将通过JavaScript从API动态加载 -->
                    </div>
                </div>
            </section>

            <!-- 学习进度 -->
            <section id="progress" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-chart-line"></i> 学习进度</h2>
                </div>
                
                <div class="progress-overview">
                    <div class="progress-card">
                        <div class="progress-icon">
                            <i class="fas fa-book-open"></i>
                        </div>
                        <div class="progress-content">
                            <h3>学习天数</h3>
                            <div class="progress-number">15</div>
                            <div class="progress-label">天</div>
                        </div>
                    </div>
                    
                    <div class="progress-card">
                        <div class="progress-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="progress-content">
                            <h3>学习时长</h3>
                            <div class="progress-number">24</div>
                            <div class="progress-label">小时</div>
                        </div>
                    </div>
                    
                    <div class="progress-card">
                        <div class="progress-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="progress-content">
                            <h3>完成课程</h3>
                            <div class="progress-number">3</div>
                            <div class="progress-label">门</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 作文批改页面 -->
            <section id="essayCorrection" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-edit"></i> 作文批改</h2>
                    <div class="section-actions">
                        <button class="btn btn-secondary" onclick="showCorrectionHistory()">
                            <i class="fas fa-history"></i> 批改历史
                        </button>
                    </div>
                </div>
                
                <div class="essay-correction-container">
                        <div class="correction-steps">
                            <div class="step active" data-step="1">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h3>选择批改方式</h3>
                                    <p>选择评分标准、AI模型或外部工具</p>
                                </div>
                            </div>
                            <div class="step" data-step="2">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h3>上传作文</h3>
                                    <p>上传学生的作文文件</p>
                                </div>
                            </div>
                            <div class="step" data-step="3">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h3>开始批改</h3>
                                    <p>AI智能批改并生成结果</p>
                                    </div>
                            </div>
                        </div>
                    
                    <div class="correction-content">
                        <!-- 步骤1：选择批改方式 -->
                        <div class="step-panel active" id="step1">
                            <div class="correction-options">
                                <div class="options-grid">
                                    <!-- 上传评分标准 -->
                                    <div class="option-card" id="uploadStandardCard">
                                        <div class="option-header">
                                            <div class="option-icon">
                                                <i class="fas fa-upload"></i>
                                            </div>
                                            <h3>上传评分标准</h3>
                                            <p>上传自定义评分标准文件</p>
                                        </div>
                                        <div class="option-content">
                                            <div class="upload-area" id="standardUploadArea">
                                                <div class="upload-icon">
                                                    <i class="fas fa-file-alt"></i>
                                                </div>
                                                <h4>上传评分标准</h4>
                                                <p>支持 .doc, .docx, .pdf, .txt 格式</p>
                                                <input type="file" id="standardFile" accept=".doc,.docx,.pdf,.txt" style="display: none;">
                                                <button class="btn btn-primary" onclick="document.getElementById('standardFile').click()">
                                                    <i class="fas fa-upload"></i> 选择文件
                                                </button>
                                            </div>
                                            <div class="file-info" id="standardFileInfo" style="display: none;">
                                                <div class="file-preview">
                                                    <div class="file-icon">
                                                        <i class="fas fa-file-alt"></i>
                                                    </div>
                                                    <div class="file-details">
                                                        <h4 id="standardFileName"></h4>
                                                        <p id="standardFileSize"></p>
                                                    </div>
                                                    <button class="btn btn-danger btn-sm" onclick="removeStandardFile()">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="option-actions" id="standardActions">
                                                <button class="btn btn-secondary btn-sm" onclick="skipStandardUpload()">
                                                    <i class="fas fa-forward"></i> 跳过
                                                </button>
                                            </div>
                                            <div class="option-actions" id="skipActions" style="display: none;">
                                                <button class="btn btn-primary btn-sm" onclick="cancelSkipStandard()">
                                                    <i class="fas fa-undo"></i> 取消跳过
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- 选择AI模型 -->
                                    <div class="option-card" id="selectAICard">
                                        <div class="option-header">
                                            <div class="option-icon">
                                                <i class="fas fa-robot"></i>
                                            </div>
                                            <h3>选择AI模型</h3>
                                            <p>选择大语言模型进行智能批改</p>
                                        </div>
                                        <div class="option-content">
                                            <div class="model-grid">
                                                <div class="model-card" data-model="gpt-4">
                                                    <div class="model-icon">
                                                        <i class="fas fa-brain"></i>
                                                    </div>
                                                    <h4>GPT-4</h4>
                                                    <p>最先进的通用语言模型，批改质量最高</p>
                                                    <div class="model-features">
                                                        <span class="feature">高精度</span>
                                                        <span class="feature">深度分析</span>
                                                    </div>
                                                </div>
                                                <div class="model-card" data-model="claude-3">
                                                    <div class="model-icon">
                                                        <i class="fas fa-lightbulb"></i>
                                                    </div>
                                                    <h4>Claude-3</h4>
                                                    <p>擅长理解和分析，提供详细建议</p>
                                                    <div class="model-features">
                                                        <span class="feature">理解力强</span>
                                                        <span class="feature">建议详细</span>
                                                    </div>
                                                </div>
                                                <div class="model-card" data-model="gemini-pro">
                                                    <div class="model-icon">
                                                        <i class="fas fa-gem"></i>
                                                    </div>
                                                    <h4>Gemini Pro</h4>
                                                    <p>平衡性能和速度，适合快速批改</p>
                                                    <div class="model-features">
                                                        <span class="feature">速度快</span>
                                                        <span class="feature">性价比高</span>
                                                    </div>
                                                </div>
                                                <div class="model-card" data-model="local-model">
                                                    <div class="model-icon">
                                                        <i class="fas fa-server"></i>
                                                    </div>
                                                    <h4>本地模型</h4>
                                                    <p>本地部署，保护隐私，适合敏感内容</p>
                                                    <div class="model-features">
                                                        <span class="feature">隐私保护</span>
                                                        <span class="feature">本地部署</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- 选择外部工具 -->
                                    <div class="option-card" id="selectToolsCard">
                                        <div class="option-header">
                                            <div class="option-icon">
                                                <i class="fas fa-tools"></i>
                                            </div>
                                            <h3>选择外部工具</h3>
                                            <p>结合专业写作工具，提供更全面的批改建议</p>
                                        </div>
                                        <div class="option-content">
                                            <div class="external-tools-grid">
                                                <div class="tool-card" data-tool="grammarly" onclick="toggleExternalToolCard('grammarly')">
                                                    <div class="tool-icon">
                                                        <i class="fas fa-spell-check"></i>
                                                    </div>
                                                    <h5>Grammarly</h5>
                                                    <p>语法检查和写作建议</p>
                                                    <div class="tool-features">
                                                        <span class="feature">语法检查</span>
                                                        <span class="feature">风格优化</span>
                                                    </div>
                                                </div>
                                                
                                                <div class="tool-card" data-tool="linguix" onclick="toggleExternalToolCard('linguix')">
                                                    <div class="tool-icon">
                                                        <i class="fas fa-language"></i>
                                                    </div>
                                                    <h5>Linguix</h5>
                                                    <p>智能写作助手和语法检查</p>
                                                    <div class="tool-features">
                                                        <span class="feature">智能建议</span>
                                                        <span class="feature">实时检查</span>
                                                    </div>
                                                </div>
                                                
                                                <div class="tool-card" data-tool="quillbot" onclick="toggleExternalToolCard('quillbot')">
                                                    <div class="tool-icon">
                                                        <i class="fas fa-edit"></i>
                                                    </div>
                                                    <h5>Quillbot</h5>
                                                    <p>文本改写和优化工具</p>
                                                    <div class="tool-features">
                                                        <span class="feature">文本改写</span>
                                                        <span class="feature">同义词替换</span>
                                                    </div>
                                                </div>
                                                
                                                <div class="tool-card" data-tool="prowritingaid" onclick="toggleExternalToolCard('prowritingaid')">
                                                    <div class="tool-icon">
                                                        <i class="fas fa-pen-fancy"></i>
                                                    </div>
                                                    <h5>ProWritingAid</h5>
                                                    <p>专业写作分析和改进</p>
                                                    <div class="tool-features">
                                                        <span class="feature">写作分析</span>
                                                        <span class="feature">风格检查</span>
                                                    </div>
                                                </div>
                                                
                                                <div class="tool-card" data-tool="hemingway" onclick="toggleExternalToolCard('hemingway')">
                                                    <div class="tool-icon">
                                                        <i class="fas fa-book"></i>
                                                    </div>
                                                    <h5>Hemingway Editor</h5>
                                                    <p>简洁写作和可读性分析</p>
                                                    <div class="tool-features">
                                                        <span class="feature">可读性</span>
                                                        <span class="feature">简洁性</span>
                                                    </div>
                                                </div>
                                                
                                                <div class="tool-card" data-tool="whitesmoke" onclick="toggleExternalToolCard('whitesmoke')">
                                                    <div class="tool-icon">
                                                        <i class="fas fa-cloud"></i>
                                                    </div>
                                                    <h5>WhiteSmoke</h5>
                                                    <p>多语言写作和翻译工具</p>
                                                    <div class="tool-features">
                                                        <span class="feature">多语言</span>
                                                        <span class="feature">翻译</span>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="tools-summary" id="toolsSummary" style="display: none;">
                                                <h5>已选择的工具：</h5>
                                                <div class="selected-tools" id="selectedToolsList"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 步骤2：上传作文 -->
                        <div class="step-panel" id="step2">
                            <div class="upload-section">
                                <div class="upload-area" id="essayUploadArea">
                                    <div class="upload-icon">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                    </div>
                                    <h3>上传学生作文</h3>
                                    <p>支持 .doc, .docx, .pdf, .txt 格式</p>
                                    <input type="file" id="essayFile" accept=".doc,.docx,.pdf,.txt" style="display: none;">
                                    <button class="btn btn-primary" onclick="document.getElementById('essayFile').click()">
                                        <i class="fas fa-upload"></i> 选择文件
                                    </button>
                                </div>
                                <div class="file-info" id="essayFileInfo" style="display: none;">
                                    <div class="file-preview">
                                        <div class="file-icon">
                                            <i class="fas fa-file-alt"></i>
                                        </div>
                                        <div class="file-details">
                                            <h4 id="essayFileName"></h4>
                                            <p id="essayFileSize"></p>
                                        </div>
                                        <button class="btn btn-danger btn-sm" onclick="removeEssayFile()">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 步骤3：批改结果 -->
                        <div class="step-panel" id="step3">
                            <div class="correction-result">
                                <div class="result-header">
                                    <h3>批改结果</h3>
                                    <div class="result-actions">
                                        <button class="btn btn-secondary" onclick="downloadResult()">
                                            <i class="fas fa-download"></i> 下载报告
                                        </button>
                                        <button class="btn btn-primary" onclick="startNewCorrection()">
                                            <i class="fas fa-plus"></i> 新建批改
                                        </button>
                                    </div>
                                </div>
                                <div class="result-content" id="correctionResult">
                                    <!-- 批改结果将在这里显示 -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="correction-actions">
                        <button class="btn btn-secondary" id="prevBtn" onclick="previousStep()" style="display: none;">
                            <i class="fas fa-arrow-left"></i> 上一步
                        </button>
                        <button class="btn btn-primary" id="nextBtn" onclick="nextStep()">
                            下一步 <i class="fas fa-arrow-right"></i>
                        </button>
                        <button class="btn btn-success" id="startBtn" onclick="startCorrection()" style="display: none;">
                            <i class="fas fa-play"></i> 开始批改
                        </button>
                    </div>
                </div>
            </section>

            <!-- 备课助手页面 -->
            <section id="lessonPlanAssistant" class="content-section">
                <div class="section-header">
                    <h2><i class="fas fa-clipboard"></i> 备课助手</h2>
                    <div class="section-actions">
                        <button class="btn btn-secondary" onclick="showLessonPlanHistory()">
                            <i class="fas fa-history"></i> 备课历史
                        </button>
                    </div>
                </div>
                
                <div class="lesson-plan-assistant-container">
                    <div class="lesson-plan-form">
                        <div class="form-group">
                            <label for="lessonSubject">
                                <i class="fas fa-book"></i> 科目
                            </label>
                            <select id="lessonSubject" class="form-control">
                                <option value="">请选择科目</option>
                                <option value="语文">语文</option>
                                <option value="数学">数学</option>
                                <option value="英语">英语</option>
                                <option value="物理">物理</option>
                                <option value="化学">化学</option>
                                <option value="生物">生物</option>
                                <option value="历史">历史</option>
                                <option value="地理">地理</option>
                                <option value="政治">政治</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="lessonGrade">
                                <i class="fas fa-user-graduate"></i> 年级
                            </label>
                            <select id="lessonGrade" class="form-control">
                                <option value="">请选择年级</option>
                                <option value="一年级">一年级</option>
                                <option value="二年级">二年级</option>
                                <option value="三年级">三年级</option>
                                <option value="四年级">四年级</option>
                                <option value="五年级">五年级</option>
                                <option value="六年级">六年级</option>
                                <option value="七年级">七年级</option>
                                <option value="八年级">八年级</option>
                                <option value="九年级">九年级</option>
                                <option value="高一">高一</option>
                                <option value="高二">高二</option>
                                <option value="高三">高三</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="lessonTopic">
                                <i class="fas fa-pencil-alt"></i> 课题名称
                            </label>
                            <input type="text" id="lessonTopic" class="form-control" placeholder="例如：Unit 3 阅读理解">
                        </div>

                        <div class="form-group">
                            <label for="lessonDuration">
                                <i class="fas fa-clock"></i> 课时时长
                            </label>
                            <select id="lessonDuration" class="form-control">
                                <option value="">请选择时长</option>
                                <option value="35">35分钟</option>
                                <option value="40">40分钟</option>
                                <option value="45">45分钟</option>
                                <option value="50">50分钟</option>
                                <option value="90">90分钟（2课时）</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="lessonTheme">
                                <i class="fas fa-lightbulb"></i> 教学主题
                            </label>
                            <input type="text" id="lessonTheme" class="form-control" placeholder="例如：春天的诗歌欣赏">
                        </div>

                        <div class="form-group">
                            <label for="lessonObjectives">
                                <i class="fas fa-target"></i> 教学目标
                            </label>
                            <textarea id="lessonObjectives" class="form-control" rows="3" placeholder="请描述本节课的教学目标..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="lessonType">
                                <i class="fas fa-tasks"></i> 课程类型
                            </label>
                            <select id="lessonType" class="form-control">
                                <option value="">请选择课程类型</option>
                                <option value="新授课">新授课</option>
                                <option value="复习课">复习课</option>
                                <option value="练习课">练习课</option>
                                <option value="实验课">实验课</option>
                                <option value="活动课">活动课</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>
                                <i class="fas fa-robot"></i> AI模型选择
                            </label>
                            <div class="model-selection-grid">
                                <div class="model-option" data-model="gpt-4">
                                    <div class="model-icon">
                                        <i class="fas fa-brain"></i>
                                    </div>
                                    <h4>GPT-4</h4>
                                    <p>高质量教案生成</p>
                                </div>
                                <div class="model-option" data-model="claude-3">
                                    <div class="model-icon">
                                        <i class="fas fa-lightbulb"></i>
                                    </div>
                                    <h4>Claude-3</h4>
                                    <p>详细的教学建议</p>
                                </div>
                                <div class="model-option" data-model="gemini-pro">
                                    <div class="model-icon">
                                        <i class="fas fa-gem"></i>
                                    </div>
                                    <h4>Gemini Pro</h4>
                                    <p>快速生成教案</p>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button class="btn btn-primary" onclick="generateLessonPlan()">
                                <i class="fas fa-magic"></i> 生成教案
                            </button>
                            <button class="btn btn-secondary" onclick="resetLessonPlanForm()">
                                <i class="fas fa-redo"></i> 重置
                            </button>
                        </div>
                    </div>

                    <div class="lesson-plan-preview" id="lessonPlanPreview" style="display: none;">
                        <div class="preview-header">
                            <h3><i class="fas fa-file-alt"></i> 生成的教案</h3>
                            <div class="preview-actions">
                                <button class="btn btn-sm btn-success" onclick="saveLessonPlan()">
                                    <i class="fas fa-save"></i> 保存
                                </button>
                                <button class="btn btn-sm btn-secondary" onclick="downloadLessonPlan()">
                                    <i class="fas fa-download"></i> 下载
                                </button>
                                <button class="btn btn-sm btn-secondary" onclick="editLessonPlan()">
                                    <i class="fas fa-edit"></i> 编辑
                                </button>
                            </div>
                        </div>
                        <div class="preview-content" id="lessonPlanContent">
                            <!-- 教案内容将在这里显示 -->
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>



    <script src="learning-platform.js"></script>
</body>
</html>
