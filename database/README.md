# æ•°æ®åº“è¯´æ˜æ–‡æ¡£

## ğŸ“ æ•°æ®åº“ç»“æ„

æœ¬é¡¹ç›®ä½¿ç”¨ JSON æ–‡ä»¶ä½œä¸ºæ•°æ®åº“ï¼Œå­˜å‚¨åœ¨ `database/` ç›®å½•ä¸‹ã€‚

### æ•°æ®æ–‡ä»¶è¯´æ˜

#### 1. `users.json` - ç”¨æˆ·æ•°æ®
```json
{
  "users": [
    {
      "studentId": "12345678",    // å­¦å·ï¼ˆ8ä½æ•°å­—ï¼‰
      "password": "abcdef",       // å¯†ç ï¼ˆ6ä½å­—æ¯ï¼‰
      "name": "å¼ ä¸‰",             // å§“å
      "grade": "ä¸‰å¹´çº§",          // å¹´çº§
      "email": "zhangsan@example.com",
      "avatar": "ğŸ‘¨â€ğŸ“",         // å¤´åƒ
      "role": "student",          // è§’è‰²
      "createdAt": "2024-01-01T00:00:00.000Z",
      "lastLogin": "2024-10-27T00:00:00.000Z",
      "isActive": true            // æ˜¯å¦æ¿€æ´»
    }
  ],
  "metadata": {
    "version": "1.0.0",
    "lastUpdated": "2024-10-27T00:00:00.000Z",
    "totalUsers": 5
  }
}
```

#### 2. `courses.json` - è¯¾ç¨‹æ•°æ®
åŒ…å«æ‰€æœ‰è¯¾ç¨‹ä¿¡æ¯å’Œç« èŠ‚å†…å®¹ã€‚

#### 3. `materials.json` - æ•™å­¦ææ–™
ä¸Šä¼ çš„æ•™å­¦æ–‡æ¡£ã€æ•™æç­‰ã€‚

#### 4. `lesson-plans.json` - æ•™æ¡ˆ
æ•™å¸ˆå¤‡è¯¾ç”Ÿæˆçš„æ•™æ¡ˆè®°å½•ã€‚

#### 5. `resources.json` - å­¦ä¹ èµ„æº
é¢˜åº“ã€å‚è€ƒèµ„æ–™ç­‰èµ„æºã€‚

#### 6. `chat-sessions.json` - èŠå¤©ä¼šè¯
AIå¯¹è¯å†å²è®°å½•ã€‚

---

## ğŸ” é»˜è®¤è´¦æˆ·

é¡¹ç›®é¢„è®¾äº†ä»¥ä¸‹æµ‹è¯•è´¦æˆ·ï¼š

| å­¦å· | å¯†ç  | å§“å | å¹´çº§ | çŠ¶æ€ |
|------|------|------|------|------|
| 12345678 | abcdef | å¼ ä¸‰ | ä¸‰å¹´çº§ | âœ… æ¿€æ´» |
| 20240001 | student | æå›› | å››å¹´çº§ | âœ… æ¿€æ´» |
| 20240002 | test123 | ç‹äº” | äº”å¹´çº§ | âœ… æ¿€æ´» |
| 20240003 | demoab | èµµå…­ | å…­å¹´çº§ | âœ… æ¿€æ´» |
| 20240004 | student | å°çº¢ | ä¸€å¹´çº§ | âœ… æ¿€æ´» |

---

## ğŸ“¡ API æ¥å£è¯´æ˜

### ç”¨æˆ·ç›¸å…³æ¥å£

#### ç™»å½•
```http
POST /api/auth/login
Content-Type: application/json

{
  "studentId": "12345678",
  "password": "abcdef"
}
```

å“åº”ï¼š
```json
{
  "success": true,
  "user": {
    "studentId": "12345678",
    "name": "å¼ ä¸‰",
    "grade": "ä¸‰å¹´çº§",
    ...
  }
}
```

#### è·å–ç”¨æˆ·åˆ—è¡¨
```http
GET /api/users
```

#### æ·»åŠ æ–°ç”¨æˆ·
```http
POST /api/users
Content-Type: application/json

{
  "studentId": "20240005",
  "password": "passwd",
  "name": "æ–°ç”¨æˆ·",
  "grade": "äºŒå¹´çº§",
  "email": "newuser@example.com"
}
```

#### æ›´æ–°ç”¨æˆ·ä¿¡æ¯
```http
PUT /api/users/:studentId
Content-Type: application/json

{
  "name": "æ–°åç§°",
  "grade": "æ–°å¹´çº§"
}
```

### å…¶ä»–æ¥å£

- `GET /api/courses` - è·å–è¯¾ç¨‹åˆ—è¡¨
- `GET /api/materials` - è·å–æ•™å­¦ææ–™
- `GET /api/lesson-plans` - è·å–æ•™æ¡ˆ
- `GET /api/resources` - è·å–èµ„æº

---

## ğŸ› ï¸ ä½¿ç”¨æŒ‡å—

### 1. å¯åŠ¨æœåŠ¡å™¨
```bash
npm start
```
æœåŠ¡å™¨å°†è¿è¡Œåœ¨ `http://localhost:3000`

### 2. æµ‹è¯•ç™»å½•
è®¿é—® `http://localhost:3000`
ä½¿ç”¨è´¦æˆ·ï¼š`12345678` / `abcdef`

### 3. ç®¡ç†ç”¨æˆ·
#### æ·»åŠ æ–°ç”¨æˆ·
å¯ä»¥ç›´æ¥ç¼–è¾‘ `database/users.json` æˆ–ä½¿ç”¨ API æ¥å£æ·»åŠ ã€‚

#### ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯
```bash
# ç›´æ¥ç¼–è¾‘ users.json æ–‡ä»¶
# æˆ–ä½¿ç”¨ API æ¥å£
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¯†ç å®‰å…¨**: `users.json` åŒ…å«æ˜æ–‡å¯†ç ï¼Œä¸è¦æäº¤åˆ°å…¬å¼€ä»“åº“
2. **æ•°æ®å¤‡ä»½**: å®šæœŸå¤‡ä»½ `database/` ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶
3. **å¹¶å‘æ§åˆ¶**: å½“å‰å®ç°ä¸æ”¯æŒå¹¶å‘å†™å…¥ï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹éœ€è¦æ”¹è¿›
4. **æ€§èƒ½è€ƒè™‘**: å¦‚æœç”¨æˆ·é‡å¾ˆå¤§ï¼Œå»ºè®®è¿ç§»åˆ°çœŸå®çš„æ•°æ®åº“ï¼ˆMySQLã€PostgreSQLç­‰ï¼‰

---

## ğŸ”„ æ•°æ®è¿ç§»

### ä»ç¡¬ç¼–ç è¿ç§»åˆ°æ•°æ®åº“
é¡¹ç›®å·²ç»ä» `script.js` ä¸­çš„ç¡¬ç¼–ç ç”¨æˆ·æ•°æ®åº“è¿ç§»åˆ° JSON æ–‡ä»¶æ•°æ®åº“ï¼Œæ‰€æœ‰ç”¨æˆ·æ•°æ®ç°åœ¨å­˜å‚¨åœ¨ `database/users.json`ã€‚

### å¤‡ä»½æ•°æ®
```bash
# å¤‡ä»½æ•´ä¸ªæ•°æ®åº“ç›®å½•
cp -r database database_backup_$(date +%Y%m%d)
```

### æ¢å¤æ•°æ®
```bash
# æ¢å¤å¤‡ä»½
cp -r database_backup_20241027 database
```

---

## ğŸ“ˆ æ‰©å±•å»ºè®®

### å‡çº§åˆ°çœŸå®æ•°æ®åº“

å¦‚æœé¡¹ç›®éœ€è¦æ‰©å±•ï¼Œå»ºè®®å‡çº§åˆ°ä»¥ä¸‹æ–¹æ¡ˆä¹‹ä¸€ï¼š

#### æ–¹æ¡ˆ1: SQLite
```bash
npm install better-sqlite3
```
é€‚åˆè½»é‡çº§åº”ç”¨ï¼Œå•æ–‡ä»¶æ•°æ®åº“ã€‚

#### æ–¹æ¡ˆ2: MongoDB
```bash
npm install mongodb mongoose
```
é€‚åˆæ–‡æ¡£å‹æ•°æ®ï¼Œçµæ´»æ˜“æ‰©å±•ã€‚

#### æ–¹æ¡ˆ3: PostgreSQL/MySQL
```bash
npm install pg mysql2
```
é€‚åˆå¤æ‚æŸ¥è¯¢å’Œé«˜æ€§èƒ½éœ€æ±‚ã€‚

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ï¼šç”¨æˆ·æ— æ³•ç™»å½•
- æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦è¿è¡Œ
- æ£€æŸ¥ `database/users.json` æ˜¯å¦å­˜åœ¨
- æ£€æŸ¥ JSON æ ¼å¼æ˜¯å¦æ­£ç¡®

### é—®é¢˜ï¼šæ•°æ®ä¸¢å¤±
- ä»å¤‡ä»½æ¢å¤
- æ£€æŸ¥ `.gitignore` æ˜¯å¦æ’é™¤äº†æ•°æ®åº“æ–‡ä»¶

### é—®é¢˜ï¼šæ–‡ä»¶æƒé™é”™è¯¯
```bash
# Linux/Mac
chmod -R 755 database/

# Windows (PowerShell)
icacls database /grant Users:F
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æœåŠ¡å™¨æ—¥å¿—
2. æµè§ˆå™¨æ§åˆ¶å°
3. æ•°æ®åº“æ–‡ä»¶å®Œæ•´æ€§

